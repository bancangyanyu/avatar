{"version":3,"file":"bg.js","sources":["pages/bg/bg.vue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYmcvYmcudnVl"],"sourcesContent":["<template>\n\t<view class=\"content\">\n\t\t<n-list :list=\"imageList\" imgType='bg' height='700rpx'  />\n\t</view>\n</template>\n\n<script setup>\n\timport {\r\n\t\tonLoad, \r\n\t\tonReachBottom,onPullDownRefresh\r\n\t } from '@dcloudio/uni-app' \r\n\timport {\r\n\t\tref,\r\n\t\treactive,\r\n\t\tcomputed,\r\n\t\tonMounted,\r\n\t\tonUnmounted,\r\n\t} from 'vue';\r\n\tconst pageInfo = reactive({\r\n\t\tpageSize: 20,\r\n\t\tpageNum: 1\r\n\t})\r\n\tconst hasMore = ref(false)\r\n\tconst imageList = ref([]);\r\n\tonPullDownRefresh(()=>{\r\n\t\tgetImageData(1) \r\n\t})\r\n\tconst getImageData = async (index=1) => {\r\n\t\tuni.showLoading({\r\n\t\t\ttitle: \"加载中...\"\r\n\t\t})\r\n\t\tconst {\r\n\t\t\tpageNum,\r\n\t\t\tpageSize\r\n\t\t} = pageInfo\r\n\t\tconst {\r\n\t\t\tresult: {\r\n\t\t\t\tdata\r\n\t\t\t},\r\n\t\t\tresult \r\n\t\t} = await uniCloud\r\n\t\t\t.callFunction({\r\n\t\t\t\tname: 'img-query',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tpageNum, \r\n\t\t\t\t\tpageSize,\r\n\t\t\t\t\timg_id: index,\r\n\t\t\t\t\t pageType:'bg'\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tuni.stopPullDownRefresh();\t\t\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent: `查询失败，错误信息为：${err.message}`,\r\n\t\t\t\t\tshowCancel: false\r\n\t\t\t\t}); \r\n\t\t\t\tconsole.error(err);\r\n\t\t\t})\r\n\t\thasMore.value = result?.hasMore //云端返回的是否有更多数据\r\n\t\timageList.value = imageList.value.concat(data) //云端返回的查询数据,追加到数组datalist\r\n\t\tconsole.log(\"shuju \",imageList.value);\r\n\t\tuni.hideLoading();\r\n\t\tuni.stopPullDownRefresh();\t\t\r\n\t}\n\tonMounted(()=>{\r\n\t\tgetImageData() \r\n\t})\r\n\tonReachBottom(()=>{\r\n\t\tif (hasMore.value) {\r\n\t\t\tpageInfo.pageNum++\r\n\t\t\tgetImageData()\r\n\t\t} \r\n\t}) \r\n\r\n</script> \n\n<style lang=\"scss\" scoped>\n\n</style>\n","import MiniProgramPage from 'D:/GIT_WORK/learn/avatar_vue3/pages/bg/bg.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","ref","onPullDownRefresh","uni","uniCloud","onMounted","onReachBottom","MiniProgramPage"],"mappings":";;;;;;;;;;;;;AAkBC,UAAM,WAAWA,cAAAA,SAAS;AAAA,MACzB,UAAU;AAAA,MACV,SAAS;AAAA,IACX,CAAE;AACD,UAAM,UAAUC,cAAG,IAAC,KAAK;AACzB,UAAM,YAAYA,kBAAI,CAAA,CAAE;AACxBC,kBAAAA,kBAAkB,MAAI;AACrB,mBAAa,CAAC;AAAA,IAChB,CAAE;AACD,UAAM,eAAe,OAAO,QAAM,MAAM;AACvCC,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,MACV,CAAG;AACD,YAAM;AAAA,QACL;AAAA,QACA;AAAA,MACH,IAAM;AACJ,YAAM;AAAA,QACL,QAAQ;AAAA,UACP;AAAA,QACA;AAAA,QACD;AAAA,MACA,IAAG,MAAMC,cAAQ,GAChB,aAAa;AAAA,QACb,MAAM;AAAA,QACN,MAAM;AAAA,UACL;AAAA,UACA;AAAA,UACA,QAAQ;AAAA,UACP,UAAS;AAAA,QACV;AAAA,MACL,CAAI,EACA,MAAM,SAAO;AACbD,sBAAG,MAAC,oBAAmB;AACvBA,sBAAG,MAAC,YAAW;AACfA,sBAAAA,MAAI,UAAU;AAAA,UACb,SAAS,cAAc,IAAI,OAAO;AAAA,UAClC,YAAY;AAAA,QACjB,CAAK;AACDA,sBAAAA,MAAA,MAAA,SAAA,yBAAc,GAAG;AAAA,MACrB,CAAI;AACF,cAAQ,QAAQ,iCAAQ;AACxB,gBAAU,QAAQ,UAAU,MAAM,OAAO,IAAI;AAC7CA,oBAAA,MAAA,MAAA,OAAA,yBAAY,UAAS,UAAU,KAAK;AACpCA,oBAAG,MAAC,YAAW;AACfA,oBAAG,MAAC,oBAAmB;AAAA,IACvB;AACDE,kBAAAA,UAAU,MAAI;AACb,mBAAc;AAAA,IAChB,CAAE;AACDC,kBAAAA,cAAc,MAAI;AACjB,UAAI,QAAQ,OAAO;AAClB,iBAAS;AACT,qBAAc;AAAA,MACd;AAAA,IACH,CAAE;;;;;;;;;;;;ACxEF,GAAG,WAAWC,SAAe;"}