{"version":3,"file":"random.js","sources":["pages/random/random.vue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmFuZG9tL3JhbmRvbS52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"content \">\r\n\t\t<image :src=\"avatarUrl\" alt=\"\" class=\"avatar\" :class=\"{ flashing: isFlashing }\" @click=\"handlePreview(avatarUrl)\"/>\r\n\t\t<span class=\"text\">抽取今日幸运头像</span>\r\n\t\t<div class=\"random\" @click=\"rollDice\">\r\n\t\t\t<image src=\"/static/r_r.png\" alt=\"\" class=\"dice\" :class=\"{ rolling: isRolling }\" />\r\n\t\t</div>\r\n\t</view>\r\n</template>\r\n\r\n<script setup> \r\n\timport {\r\n\t\tonMounted,\r\n\t\tref\r\n\t} from 'vue'\r\n\tconst avatarUrl = ref('')\r\n\tconst imgList = ref('')\r\n\tconst isRolling = ref(false); // 控制色子是否正在滚动\r\n\tconst isFlashing = ref(false)\r\n\tonMounted(_ => {\r\n\t\tgetImageData()\r\n\t})\r\n\tconst handlePreview = (url) => {\r\n\t\tuni.previewImage({\r\n\t\t\tcurrent: 0, //  传 Number H5端出现不兼容 \r\n\t\t\turls: [url]\r\n\t\t});\r\n\t}\r\n\tconst getImageData = async () => {\r\n\t\tconst {\r\n\t\t\tresult: {\r\n\t\t\t\tdata\r\n\t\t\t},\r\n\t\t\tresult\r\n\t\t} = await uniCloud\r\n\t\t\t.callFunction({\r\n\t\t\t\tname: 'img-query',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tpageNum: 0,\r\n\t\t\t\t\tpageSize: 10,\r\n\t\t\t\t\timg_id: 0\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\timgList.value = data\r\n\t\tconsole.log(\"imgList\", data);\r\n\t\tgetRandomAvatar()\r\n\t}\r\n\t// 随机抽取头像\r\n\tconst getRandomAvatar = () => {\r\n\t\tif (imgList.value.length === 0) {\r\n\t\t\tconsole.error('头像列表为空');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst randomIndex = Math.floor(Math.random() * imgList.value.length);\r\n\t\tavatarUrl.value = imgList.value[randomIndex].img_url; // 假设头像地址在 avatarUrl 字段\r\n\t\tisRolling.value = false; // 动画结束后停止\r\n\t\tisFlashing.value = false; // 触发头像闪烁\r\n\t};\r\n\t// 色子转动事件\r\n\tconst rollDice = () => {\r\n\t\tisRolling.value = true; // 触发动画\r\n\t\tisFlashing.value = true; // 触发头像闪烁\r\n\t\tsetTimeout(() => {\r\n\t\t\tgetRandomAvatar(); // 随机抽取头像\r\n\t\t}, 1000); // 动画持续时间（1秒） \r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t\r\n\t@keyframes roll {\r\n\t\t0% {\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\t\t100% {\r\n\t\t\ttransform: rotate(360deg);\r\n\t\t}\r\n\t}\r\n\t@keyframes flash {\r\n\t\t\t0%, 100% {\r\n\t\t\t\topacity: 1;\r\n\t\t\t}\r\n\t\t\t50% {\r\n\t\t\t\topacity: 0.5; // 闪烁效果\r\n\t\t\t}\r\n\t\t}\r\n\t.content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tgap: 40rpx;\r\n\t\tpadding-top: 100rpx;\r\n\r\n\t\t.text {\r\n\t\t\tcolor: red;\r\n\t\t\tfont-weight: blod;\r\n\t\t}\r\n\r\n\t\t.avatar {\r\n\t\t\twidth: 500rpx;\r\n\t\t\theight: 500rpx;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\t&.flashing {\r\n\t\t\t\tanimation: flash 1s infinite; // 闪烁动画\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.random {\r\n\t\t\twidth: 150rpx;\r\n\t\t\theight: 150rpx;\r\n\t\t\tcursor: pointer;\r\n\t\t\tposition: relative;\r\n\t\t\t.dice {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%; \r\n\t\t\t\ttransition: transform 1s ease; // 动画持续时间\r\n\t\t\t\t&.rolling {\r\n\t\t\t\t\tanimation: roll 1s forwards;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} \r\n\t}\r\n\r\n</style>","import MiniProgramPage from 'D:/GIT_WORK/learn/avatar_vue3/pages/random/random.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onMounted","uni","uniCloud"],"mappings":";;;;;;AAeC,UAAM,YAAYA,cAAG,IAAC,EAAE;AACxB,UAAM,UAAUA,cAAG,IAAC,EAAE;AACtB,UAAM,YAAYA,kBAAI,KAAK;AAC3B,UAAM,aAAaA,cAAG,IAAC,KAAK;AAC5BC,kBAAAA,UAAU,OAAK;AACd,mBAAc;AAAA,IAChB,CAAE;AACD,UAAM,gBAAgB,CAAC,QAAQ;AAC9BC,oBAAAA,MAAI,aAAa;AAAA,QAChB,SAAS;AAAA;AAAA,QACT,MAAM,CAAC,GAAG;AAAA,MACb,CAAG;AAAA,IACD;AACD,UAAM,eAAe,YAAY;AAChC,YAAM;AAAA,QACL,QAAQ;AAAA,UACP;AAAA,QACA;AAAA,QACD;AAAA,MACA,IAAG,MAAMC,cAAQ,GAChB,aAAa;AAAA,QACb,MAAM;AAAA,QACN,MAAM;AAAA,UACL,SAAS;AAAA,UACT,UAAU;AAAA,UACV,QAAQ;AAAA,QACR;AAAA,MACL,CAAI;AACF,cAAQ,QAAQ;AAChBD,oBAAY,MAAA,MAAA,OAAA,iCAAA,WAAW,IAAI;AAC3B,sBAAiB;AAAA,IACjB;AAED,UAAM,kBAAkB,MAAM;AAC7B,UAAI,QAAQ,MAAM,WAAW,GAAG;AAC/BA,sBAAAA,MAAc,MAAA,SAAA,iCAAA,QAAQ;AACtB;AAAA,MACA;AACD,YAAM,cAAc,KAAK,MAAM,KAAK,OAAM,IAAK,QAAQ,MAAM,MAAM;AACnE,gBAAU,QAAQ,QAAQ,MAAM,WAAW,EAAE;AAC7C,gBAAU,QAAQ;AAClB,iBAAW,QAAQ;AAAA,IACrB;AAEC,UAAM,WAAW,MAAM;AACtB,gBAAU,QAAQ;AAClB,iBAAW,QAAQ;AACnB,iBAAW,MAAM;AAChB;MACA,GAAE,GAAI;AAAA,IACP;;;;;;;;;;;;;;AChEF,GAAG,WAAW,eAAe;"}