"use strict";const e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("fui-tabs")+e.resolveComponent("n-list"))()}Math||((()=>"../../node-modules/firstui-uni/firstui/fui-tabs/fui-tabs.js")+(()=>"../../components/list/index.js"))();const a={__name:"index",setup(a){const o=e.ref([]),n=e.ref(0),l=e.reactive({pageSize:20,pageNum:1}),t=e.ref(!1),s=e.ref([]);e.onReachBottom((()=>{t.value&&(l.pageNum++,u())})),e.onPullDownRefresh((()=>{u(n.value)}));const u=async(a=0)=>{e.index.showLoading({title:"加载中..."});const{pageNum:o,pageSize:u}=l,{result:{data:i},result:r}=await e.er.callFunction({name:"img-query",data:{pageNum:o,pageSize:u,img_id:a||n.value}}).catch((a=>{e.index.hideLoading(),e.index.showModal({content:`查询失败，错误信息为：${a.message}`,showCancel:!1}),console.error(a),e.index.stopPullDownRefresh()}));e.index.stopPullDownRefresh(),t.value=null==r?void 0:r.hasMore,s.value=s.value.concat(i),console.log("shuju ",s.value),e.index.hideLoading()},i=({value:e})=>{console.log("点击",e),s.value=[],l.pageNum=1,n.value=e,u(e)};return e.onMounted((()=>{console.log("mounted"),u(),(async()=>{const{result:{data:a},result:n}=await e.er.callFunction({name:"img-type-query"}).catch((a=>{e.index.hideLoading(),console.error(a)}));console.log("type",a),o.value=a.map((e=>({name:e.img_type,value:e.img_id})))})()})),(a,l)=>({a:e.o(i),b:e.o((e=>n.value=e)),c:e.p({scroll:!0,tabs:o.value,selectClass:"text-yellow",modelValue:n.value}),d:e.p({list:s.value})})}},o=e._export_sfc(a,[["__scopeId","data-v-2009235a"]]);wx.createPage(o);
