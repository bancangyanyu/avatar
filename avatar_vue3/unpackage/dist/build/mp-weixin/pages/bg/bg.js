"use strict";const e=require("../../common/vendor.js");if(!Array){e.resolveComponent("n-list")()}Math;const a={__name:"bg",setup(a){const o=e.reactive({pageSize:20,pageNum:1}),n=e.ref(!1),t=e.ref([]);e.onPullDownRefresh((()=>{i(1)}));const i=async(a=1)=>{e.index.showLoading({title:"加载中..."});const{pageNum:i,pageSize:s}=o,{result:{data:l},result:r}=await e.er.callFunction({name:"img-query",data:{pageNum:i,pageSize:s,img_id:a,pageType:"bg"}}).catch((a=>{e.index.stopPullDownRefresh(),e.index.hideLoading(),e.index.showModal({content:`查询失败，错误信息为：${a.message}`,showCancel:!1}),console.error(a)}));n.value=null==r?void 0:r.hasMore,t.value=t.value.concat(l),console.log("shuju ",t.value),e.index.hideLoading(),e.index.stopPullDownRefresh()};return e.onMounted((()=>{i()})),e.onReachBottom((()=>{n.value&&(o.pageNum++,i())})),(a,o)=>({a:e.p({list:t.value,imgType:"bg",height:"700rpx"})})}};wx.createPage(a);
