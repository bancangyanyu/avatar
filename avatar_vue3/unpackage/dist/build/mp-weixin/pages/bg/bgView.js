"use strict";const e=require("../../common/vendor.js"),o=require("../../common/assets.js"),s={__name:"bgView",setup(s){const i=e.ref(""),a=e.ref(!0),n=async(o=1)=>{if(1===o)e.index.navigateBack();else if(2===o){if(i.value){const e=await l(i.value);t(e)}}else a.value=!a.value},l=o=>(e.index.showLoading({title:"加载中"}),new Promise(((s,i)=>{e.index.getImageInfo({src:o,success:o=>{console.log("获取的图片信息",o.path),e.index.hideLoading(),s(o.path)}})}))),t=o=>{e.index.hideLoading(),e.index.saveImageToPhotosAlbum({filePath:o,success:o=>{e.index.showModal({title:"保存成功",content:"聊天背景图已经在您的相册里啦",showCancel:!1}),e.index.vibrateShort({success:()=>{console.log("vibrateShort")}})},fail:o=>{console.log("error",o),o.errMsg.indexOf("fail")&&e.index.showModal({title:"您需要授权相册权限",success:o=>{o.confirm&&e.index.openSetting({success(e){console.log("相册授权成功")},fail(e){console.log(e)}})}})}})};e.onLoad((e=>{c(e)}));const c=e=>{const o=(null==e?void 0:e.item)?JSON.parse(null==e?void 0:e.item):{},{img_url:s,img_id:a}=o;i.value=s};return(s,l)=>e.e({a:i.value,b:a.value},a.value?{c:o._imports_0$1}:{},{d:e.o((e=>n(1))),e:e.o((e=>n(3))),f:a.value?1:"",g:e.o((e=>n(2)))})}},i=e._export_sfc(s,[["__scopeId","data-v-8572447a"]]);wx.createPage(i);
